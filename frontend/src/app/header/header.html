<header class="header">


    <!-- Add menu button for mobile -->
    <button class="menu-toggle" (click)="toggleSidebar()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
        </svg>
    </button>

    <div class="logo" (click)="goToHome()">
        <!-- <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 650 679">
            <path fill="currentColor"
                d="M326 306h-73c-12 0-23-11-23-24c0-12 11-23 23-23h73c13 0 23 11 23 23c0 13-10 24-23 24zm-73 98h145c13 0 23 10 23 23s-10 23-23 23H253c-12 0-23-10-23-23s11-23 23-23zM98 29h454c54 0 98 44 98 98v454c0 54-44 98-98 98H98c-54 0-98-44-98-98V127c0-54 44-98 98-98zm428 403v-96c0-18-5-30-27-30h-17c-18 0-28-11-28-24v-11c0-57-62-117-116-117h-85c-71 0-127 56-127 127v152c0 67 58 121 117 121h161c65 0 122-55 122-122z" />
        </svg> -->
        <img class="image-logo" src="logo/logo_01_blog.png" alt="Blog Logo">

        Blogger
    </div>
    <div class="header-actions">
        <button class="create-post-btn-header" (click)="openDialog_post()">
            <span class="btn-content-desktop">
                <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z" fill="currentColor"></path>
                </svg>
                Create
            </span>
            <span class="btn-content-mobile">+</span>
        </button>
        <div class="notification-wrapper">
            <div class="notification-icon" (click)="toggleNotifications()">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
                    <path fill="currentColor"
                        d="M10.146 3.248a2 2 0 0 1 3.708 0A7.003 7.003 0 0 1 19 10v4.697l1.832 2.748A1 1 0 0 1 20 19h-4.535a3.501 3.501 0 0 1-6.93 0H4a1 1 0 0 1-.832-1.555L5 14.697V10c0-3.224 2.18-5.94 5.146-6.752zM10.586 19a1.5 1.5 0 0 0 2.829 0h-2.83zM12 5a5 5 0 0 0-5 5v5a1 1 0 0 1-.168.555L5.869 17H18.13l-.963-1.445A1 1 0 0 1 17 15v-5a5 5 0 0 0-5-5z" />
                </svg>
                @if(currentUser && notificationCount > 0) {
                <span class="notification-badge">{{ notificationCount }}</span>
                }
            </div>

            <div [class]="visibleNotifications? 'notification-dropdown show':'notification-dropdown'"
                id="notificationDropdown">
                <div class="notification-header">
                    <h5>Notifications</h5>
                    <button class="mark-read-btn" (click)="markAllRead()"> Mark all as read</button>
                </div>

                <div class="notification-list">
                    @for (notif of notifications$ | async; track notif?.id) {
                    <app-notification (onClickEventHandler)="toggleNotifications()"
                        [notificationInfo]="notif"></app-notification>
                    }
                </div>
            </div>
        </div>
        @if(currentUser) {
        <img (click)="goToMyProfile()" [src]="'http://localhost:8080/api/profile/image/'+ currentUser?.username"
            alt="Profile" class="profile-img">
        }@else {
        <img [src]="'http://localhost:8080/api/profile/image/me'" alt="Profile" class="profile-img">
        }
    </div>
</header>