<article class="post" *ngIf="postInfo">
    <div class="post-header" (click)="goToProfile(postInfo?.author?.username)">

        @if(postInfo) {
        <img [src]="'http://localhost:8080/api/profile/image/' + postInfo?.author?.username" alt="Author"
            class="post-avatar">
        }
        <div>
            <div class="post-author"> {{ postInfo?.author?.fullname }}</div>
            @if (postInfo) {
            <div class="post-time"> {{ getTimeAgo(postInfo.creationDate) }}</div>
            } @else {
            <div class="post-time">...</div>
            }
        </div>
    </div>
    <div class="post-content" (click)="goToPostView(postInfo.id)">
        <h3 class="post-title">{{ postInfo?.title}}</h3>
        <p>{{ postInfo?.content }}</p>
        <div
            [class]="postInfo && postInfo.mediaUploads && postInfo.mediaUploads.length > 1 ? 'post-media multi-images':'post-media'">
            @if( postInfo && postInfo.mediaUploads && postInfo.mediaUploads.length > 1) {
            <div class="image-grid">
                @for( media of postInfo?.mediaUploads; track media?.id) {
                @if (media.type.toString()=='Image') {
                    <img [src]="'http://localhost:8080/api/media/file/' + media?.id" alt="Web development trends"
                    class="grid-image">
                }@else {
                    <video [src]="'http://localhost:8080/api/media/file/' + media?.id" controls class="grid-image"></video>
                }
                }
            </div>
            } @else if(postInfo && postInfo.mediaUploads && postInfo.mediaUploads.length > 0) {
            @for( media of postInfo?.mediaUploads; track media?.id) {
            @if (media.type.toString()=='Image') {
            <img [src]="'http://localhost:8080/api/media/file/' + media?.id" alt="Web development trends"
                class="post-image">
            }@else {
            <video [src]="'http://localhost:8080/api/media/file/' + media?.id" controls class="post-video"></video>
            }
            }
            }
        </div>

    </div>
    <div class="post-actions">
        <button class="action-btn" (click)="onLike()">‚ù§Ô∏è {{ likes$ | async }}</button>
        <button class="action-btn" (click)="onComment()">üí¨ {{ postInfo?.comments?.length }}</button>
        <button class="action-btn" (click)="onReport()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z"
                    stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" />
                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" />
                <path d="M8 12L10 10L12 14L16 11" stroke="currentColor" stroke-width="1.5" fill="none"
                    stroke-linecap="round" stroke-linejoin="round" />
                <circle cx="8" cy="12" r="1.5" fill="currentColor" />
                <circle cx="10" cy="10" r="1.5" fill="currentColor" />
                <circle cx="12" cy="14" r="1.5" fill="currentColor" />
                <circle cx="16" cy="11" r="1.5" fill="currentColor" />
                <line x1="8" y1="6" x2="12" y2="6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <line x1="8" y1="17" x2="16" y2="17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <line x1="8" y1="19" x2="14" y2="19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            Report</button>
    </div>
</article>



<!--
<article class="post" *ngIf="postInfo">
    <div class="post-header">
                
        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face"
            alt="Author" class="post-avatar">
        <div>
            <div class="post-author"> {{ postInfo?.author?.fullname }}</div>
            <div class="post-time"> 1h ago</div>
        </div>
    </div>
    <div class="post-content">
        <h3 class="post-title">{{ postInfo?.title}}</h3>
        <p>{{ postInfo?.content }}</p>
        <div [class]="postInfo?.mediaUploads?.length > 1 ? 'post-media multi-images':'post-media'">
            @if( postInfo.mediaUploads?.length > 1) {
                <div class="image-grid">
                    @for( media of postInfo.mediaUploads; track media.id) {
                        <img [src]="media.url"
                        alt="Web development trends" class="grid-image">
                    }
                </div>
            }@ else {
                @for( media of postInfo?.mediaUploads; track media?.id) {
                    <img [src]="media.url"
                    alt="Web development trends" class="post-image">
                }
            }
        </div>
    </div>
    <div class="post-actions">
        <button class="action-btn" (click)="onLike()">‚ù§Ô∏è {{ postInfo?.likes }}</button>
        <button class="action-btn" (click)="onComment()">üí¨ {{ postInfo?.comments }}</button>
        <button class="action-btn" (click)="onReport()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z"
                    stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" />
                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" />
                <path d="M8 12L10 10L12 14L16 11" stroke="currentColor" stroke-width="1.5" fill="none"
                    stroke-linecap="round" stroke-linejoin="round" />
                <circle cx="8" cy="12" r="1.5" fill="currentColor" />
                <circle cx="10" cy="10" r="1.5" fill="currentColor" />
                <circle cx="12" cy="14" r="1.5" fill="currentColor" />
                <circle cx="16" cy="11" r="1.5" fill="currentColor" />
                <line x1="8" y1="6" x2="12" y2="6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <line x1="8" y1="17" x2="16" y2="17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                <line x1="8" y1="19" x2="14" y2="19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            Report</button>
    </div>
</article>

<div [class]="postInfo?.mediaUploads?.length > 1 ? 'post-media multi-images':'post-media'">
            @if( postInfo.mediaUploads?.length > 1) {
                <div class="image-grid">
                    @for( media of postInfo.mediaUploads; track media.id) {
                        <img [src]="'http://localhost:8080/api/media/' + media.id"
                        alt="Web development trends" class="grid-image">
                    }
                </div>
            } @else {
                @for( media of postInfo?.mediaUploads; track media?.id) {
                    <img [src]="'http://localhost:8080/api/media/' + media.id"
                    alt="Web development trends" class="post-image">
                }
            }
        </div>
<div class="post-media">
            <img src="https://images.unsplash.com/photo-1517180102446-f3ece451e9d8?w=600&h=300&fit=crop"
                alt="Web development trends" class="post-image">
-->